(this["webpackJsonpmy-network"]=this["webpackJsonpmy-network"]||[]).push([[0],{22:function(e,t,s){e.exports={avatar:"Users_avatar__16ef6",container:"Users_container__3QPR4",dialog:"Users_dialog__1QOzb",selectedPage:"Users_selectedPage__2RjGa"}},25:function(e,t,s){e.exports={dialogs:"Dialogs_dialogs__1IHb5",dialogsItems:"Dialogs_dialogsItems__qS49b",messages:"Dialogs_messages__2gikW"}},26:function(e,t,s){e.exports={header:"Header_header__2sXVX",block:"Header_block__y02nL",loginBlock:"Header_loginBlock__17vaA"}},31:function(e,t,s){e.exports={dialog:"DialogsItems_dialog__2tTJ_",active:"DialogsItems_active__2dNo3"}},33:function(e,t,s){e.exports={content:"ProfileInfo_content__2Lkkv",description:"ProfileInfo_description__2-XqL"}},34:function(e,t,s){e.exports={addPost:"MyPosts_addPost__ZRc0z",myPost:"MyPosts_myPost__3kVbw"}},44:function(e,t,s){e.exports={message:"Messages_message__1nM0S"}},46:function(e,t,s){e.exports={avatar:"Post_avatar__3gbKM"}},48:function(e,t,s){},52:function(e,t,s){},7:function(e,t,s){e.exports={nav:"Navigation_nav__3Ae5K",item:"Navigation_item__2mI9_",activeLink:"Navigation_activeLink__rsLjH"}},77:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),i=(s(48),s(23)),r=s.n(i),c=(s(52),s(7)),o=s.n(c),l=s(5),u=s(0),d=function(){return Object(u.jsxs)("nav",{className:o.a.nav,children:[Object(u.jsx)("div",{className:o.a.item,children:Object(u.jsx)(l.b,{to:"/profile",activeClassName:o.a.activeLink,children:"Profile"})}),Object(u.jsx)("div",{className:o.a.item,children:Object(u.jsx)(l.b,{to:"/dialogs",activeClassName:o.a.activeLink,children:"Messages"})}),Object(u.jsx)("div",{className:o.a.item,children:Object(u.jsx)(l.b,{to:"/users",activeClassName:o.a.activeLink,children:"Users"})}),Object(u.jsx)("div",{className:o.a.item,children:Object(u.jsx)(l.b,{to:"/news",activeClassName:o.a.activeLink,children:"News"})}),Object(u.jsx)("div",{className:o.a.item,children:Object(u.jsx)(l.b,{to:"/music",activeClassName:o.a.activeLink,children:"Music"})}),Object(u.jsx)("div",{className:o.a.item,children:Object(u.jsx)(l.b,{to:"settings",activeClassName:o.a.activeLink,children:"Settings"})})]})},j=s(4),g=function(){return Object(u.jsx)("div",{children:"News"})},b=function(){return Object(u.jsx)("div",{children:"Music"})},p=function(){return Object(u.jsx)("div",{children:"Settings"})},h=s(25),O=s.n(h),f=s(31),m=s.n(f),x=function(e){return Object(u.jsx)("div",{className:m.a.dialog,children:Object(u.jsx)(l.b,{to:"/dialogs/"+e.id,activeClassName:m.a.active,children:e.name})})},v=s(44),P=s.n(v),w=function(e){return Object(u.jsx)("div",{className:P.a.message,children:e.message})},_=s(17),N=s(2),C="UPDATE-NEW-MESSAGE-TEXT",k="SEND_MESSAGE",T={dialogs:[{id:1,name:"Mari"},{id:2,name:"Sergei"},{id:3,name:"Lyubov"}],messages:[{id:1,message:"Hello"},{id:2,message:"Hay"},{id:3,message:"Salyut"}],newMessageText:""},y=s(11),I=Object(y.b)((function(e){return{dialogsPage:e.dialogsPage}}),(function(e){return{updateNewMessageText:function(t){e(function(e){return{type:C,newTextMessage:e}}(t))},sendMessage:function(){e({type:k})}}}))((function(e){var t=e.dialogsPage,s=t.dialogs.map((function(e){return Object(u.jsx)(x,{id:e.id,name:e.name},e.id)})),n=t.messages.map((function(e){return Object(u.jsx)(w,{message:e.message},e.id)})),a=t.newMessageText;return Object(u.jsxs)("div",{className:O.a.dialogs,children:[Object(u.jsx)("div",{className:O.a.dialogsItems,children:s}),Object(u.jsxs)("div",{className:O.a.messages,children:[Object(u.jsx)("div",{children:n}),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:Object(u.jsx)("textarea",{value:a,onChange:function(t){var s=t.target.value;e.updateNewMessageText(s)}})}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{onClick:function(){e.sendMessage()},children:"SEND"})})]})]})]})})),S=s(15),F=s(16),E=s(19),U=s(18),M="FOLLOW",L="UNFOLLOW",A="SET_USERS",D="SET_CURRENT_PAGE",R="SET_TOTAL_USERS_COUNT",G="TOGGLE_IS_FETCHING",z="TOGGLE_IS_FOLLOWING_PROGRESS",H={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},W=s(13),B=s.n(W),X=s(22),K=s.n(X),J=s.p+"static/media/avatar.65d0f7cf.jpg",q=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),s=[],n=1;n<=t;n++)s.push(n);return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:s.map((function(t){return Object(u.jsx)("span",{className:e.currentPage===t&&K.a.selectedPage,onClick:function(){e.onPageChanged(t)},children:t})}))}),e.users.map((function(t){return Object(u.jsxs)("div",{className:K.a.container,children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:Object(u.jsx)(l.b,{to:"/profile"+t.id,children:Object(u.jsx)("img",{className:K.a.avatar,src:null!=t.photos.small?t.photos.small:J,alt:"avatar"})})}),Object(u.jsx)("div",{children:t.followed?Object(u.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.toggleFollowingProgress(!0,t.id),B.a.delete("https://social-network.samuraijs.com/api/1.0/follow/".concat(t.id),{withCredentials:!0,headers:{"API-KEY":"830641ed-510b-42e3-bd30-9338086d8ee0"}}).then((function(s){0===s.data.resultCode&&e.unfollow(t.id),e.toggleFollowingProgress(!1,t.id)}))},children:"Unfollow"}):Object(u.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.toggleFollowingProgress(!0,t.id),B.a.post("https://social-network.samuraijs.com/api/1.0/follow/".concat(t.id),{},{withCredentials:!0,headers:{"API-KEY":"830641ed-510b-42e3-bd30-9338086d8ee0"}}).then((function(s){0===s.data.resultCode&&e.follow(t.id),e.toggleFollowingProgress(!1,t.id)}))},children:"Follow"})})]}),Object(u.jsxs)("div",{className:K.a.dialog,children:[Object(u.jsx)("div",{children:t.name}),Object(u.jsx)("div",{children:t.status})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:"u.location.country"}),Object(u.jsx)("div",{children:"u.location.city"})]})]},t.id)}))]})},Q=s.p+"static/media/Gear-0.4s-200px.8a393f63.svg",V=function(e){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("img",{src:Q,alt:""})})},Y=function(e){Object(E.a)(s,e);var t=Object(U.a)(s);function s(){var e;Object(S.a)(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onPageChanged=function(t){e.props.toggleIsFetching(!0),e.props.setCurrentPage(t),B.a.get("https://social-network.samuraijs.com/api/1.0/users?page=".concat(t,"&count=").concat(e.props.pageSize),{withCredentials:!0}).then((function(t){e.props.toggleIsFetching(!1),e.props.setUsers(t.data.items)}))},e}return Object(F.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.props.toggleIsFetching(!0),B.a.get("https://social-network.samuraijs.com/api/1.0/users?page=".concat(this.props.currentPage,"&count=").concat(this.props.pageSize),{withCredentials:!0}).then((function(t){e.props.toggleIsFetching(!1),e.props.setUsers(t.data.items),e.props.setTotalUsersCount(t.data.totalCount)}))}},{key:"render",value:function(){return Object(u.jsxs)(u.Fragment,{children:[this.props.isFetching?Object(u.jsx)(V,{}):null,Object(u.jsx)(q,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,toggleFollowingProgress:this.props.toggleFollowingProgress,followingInProgress:this.props.followingInProgress})]})}}]),s}(a.a.Component),Z={follow:function(e){return{type:M,userID:e}},unfollow:function(e){return{type:L,userID:e}},setUsers:function(e){return{type:A,users:e}},setCurrentPage:function(e){return{type:D,currentPage:e}},setTotalUsersCount:function(e){return{type:R,count:e}},toggleIsFetching:function(e){return{type:G,isFetching:e}},toggleFollowingProgress:function(e,t){return{type:z,isFetching:e,id:t}}},$=Object(y.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),Z)(Y),ee=s(33),te=s.n(ee),se=s.p+"static/media/steampunk.053b7fa5.jpg",ne=function(e){return e.profile?Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:te.a.content,children:Object(u.jsx)("img",{src:se,alt:"img"})}),Object(u.jsxs)("div",{className:te.a.description,children:[Object(u.jsx)("img",{src:e.profile.photos.small,alt:"ava"}),"ava + description"]})]}):Object(u.jsx)(V,{})},ae="ADD-POST",ie="UPDATE-NEW-POST-TEXT",re="SET_USER_PROFILE",ce={posts:[{id:1,message:"Hi have are you?",like:15}],newPostText:"",profile:null},oe=s(34),le=s.n(oe),ue=s(46),de=s.n(ue),je=function(e){return Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:de.a.avatar,children:[Object(u.jsx)("img",{src:J,alt:"avatar"}),e.message,Object(u.jsx)("div",{children:Object(u.jsxs)("span",{children:["like",Object(u.jsxs)("span",{children:[" ",e.like," "]})]})})]})})},ge=Object(y.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{updateNewPostText:function(t){var s=function(e){return{type:ie,newPostText:e}}(t);e(s)},addPost:function(){e({type:ae})}}}))((function(e){var t=e.posts.map((function(e){return Object(u.jsx)(je,{message:e.message,like:e.like},e.id)})),s=n.createRef();return Object(u.jsxs)("div",{className:le.a.myPost,children:[Object(u.jsx)("h4",{children:"My posts"}),Object(u.jsxs)("div",{className:le.a.addPost,children:[Object(u.jsx)("textarea",{ref:s,value:e.newPostText,onChange:function(){var t=s.current.value;e.updateNewPostText(t)}}),Object(u.jsx)("button",{onClick:function(){e.addPost()},children:"Add Post"})]}),t]})})),be=function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)(ne,{profile:e.profile}),Object(u.jsx)(ge,{})]})},pe=function(e){Object(E.a)(s,e);var t=Object(U.a)(s);function s(){return Object(S.a)(this,s),t.apply(this,arguments)}return Object(F.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.userId;t||(t=2),B.a.get("https://social-network.samuraijs.com/api/1.0/profile/"+t).then((function(t){e.props.setUserProfile(t.data)}))}},{key:"render",value:function(){return Object(u.jsx)(be,Object(N.a)(Object(N.a)({},this.props),{},{profile:this.props.profile}))}}]),s}(a.a.Component),he=Object(j.e)(pe),Oe=Object(y.b)((function(e){return{profile:e.profilePage.profile}}),{setUserProfile:function(e){return{type:re,profile:e}}})(he),fe=s(26),me=s.n(fe),xe=function(e){return Object(u.jsx)("header",{className:me.a.header,children:Object(u.jsx)("div",{className:me.a.block,children:Object(u.jsx)("div",{className:me.a.loginBlock,children:e.isAuth?e.login:Object(u.jsx)(l.b,{to:"/login",children:" Login "})})})})},ve="SET_USER_DATA",Pe={id:null,email:null,login:null,isFetching:!1,isAuth:!1},we=function(e){Object(E.a)(s,e);var t=Object(U.a)(s);function s(){return Object(S.a)(this,s),t.apply(this,arguments)}return Object(F.a)(s,[{key:"componentDidMount",value:function(){var e=this;B.a.get("https://social-network.samuraijs.com/api/1.0/auth/me",{withCredentials:!0}).then((function(t){if(0===t.data.resultCode){var s=t.data.data,n=s.id,a=s.email,i=s.login;e.props.setAuthUserData(n,a,i)}}))}},{key:"render",value:function(){return Object(u.jsx)(xe,Object(N.a)({},this.props))}}]),s}(a.a.Component),_e=Object(y.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{setAuthUserData:function(e,t,s){return{type:ve,data:{id:e,email:t,login:s}}}})(we);var Ne=function(){return Object(u.jsxs)("div",{className:"App-wrapper",children:[Object(u.jsx)(_e,{}),Object(u.jsx)(d,{}),Object(u.jsxs)("div",{className:"app-wrapper-content",children:[Object(u.jsx)(j.a,{path:"/profile:userId?",render:function(){return Object(u.jsx)(Oe,{})}}),Object(u.jsx)(j.a,{path:"/dialogs",render:function(){return Object(u.jsx)(I,{})}}),Object(u.jsx)(j.a,{path:"/users",render:function(){return Object(u.jsx)($,{})}}),Object(u.jsx)(j.a,{path:"/news",render:function(){return Object(u.jsx)(g,{})}}),Object(u.jsx)(j.a,{path:"/music",render:function(){return Object(u.jsx)(b,{})}}),Object(u.jsx)(j.a,{path:"/settings",render:function(){return Object(u.jsx)(p,{})}})]})]})},Ce=s(21),ke=Object(Ce.b)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:var s={id:2,message:e.newPostText,like:1};return Object(N.a)(Object(N.a)({},e),{},{posts:[].concat(Object(_.a)(e.posts),[s]),newPostText:""});case ie:return Object(N.a)(Object(N.a)({},e),{},{newPostText:t.newTextPost});case re:return Object(N.a)(Object(N.a)({},e),{},{profile:t.profile});default:return e}},dialogsPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(N.a)(Object(N.a)({},e),{},{newMessageText:t.newTextMessage});case k:var s=e.newMessageText;return Object(N.a)(Object(N.a)({},e),{},{messages:[].concat(Object(_.a)(e.messages),[{id:4,message:s}]),newMessageText:""});default:return e}},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(N.a)(Object(N.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(N.a)(Object(N.a)({},e),{},{followed:!0}):e}))});case L:return Object(N.a)(Object(N.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(N.a)(Object(N.a)({},e),{},{followed:!1}):e}))});case A:return Object(N.a)(Object(N.a)({},e),{},{users:t.users});case D:return Object(N.a)(Object(N.a)({},e),{},{currentPage:t.currentPage});case R:return Object(N.a)(Object(N.a)({},e),{},{totalUsersCount:t.count});case G:return Object(N.a)(Object(N.a)({},e),{},{isFetching:t.isFetching});case z:return Object(N.a)(Object(N.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(_.a)(e.followingInProgress),[t.id]):e.followingInProgress.filter((function(e){return e!=t.id}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return Object(N.a)(Object(N.a)(Object(N.a)({},e),t.data),{},{isAuth:!0});default:return e}}}),Te=Object(Ce.c)(ke);window.store=Te;var ye=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,78)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;s(e),n(e),a(e),i(e),r(e)}))};r.a.render(Object(u.jsx)(l.a,{children:Object(u.jsx)(y.a,{store:Te,children:Object(u.jsx)(Ne,{})})}),document.getElementById("root")),ye()}},[[77,1,2]]]);
//# sourceMappingURL=main.7e18cf74.chunk.js.map